<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>JOUE MA VIE</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="css/style.css">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#FFC0CB">
</head>
<div id="updateToast" class="hidden">
  <span>‚ú® Nouvelle version disponible</span>
  <button id="updateBtn">Mettre √† jour</button>
</div>
<body>
<div class="game">

  <!-- Accueil -->
  <div id="homeScreen">
    <h1>üéÆ JOUE MA VIE</h1>
    <p><strong>Joueuse :</strong> <span id="name"></span></p>
    <p><strong>Niveau :</strong> <span id="level">1</span></p>
    <p><strong>XP totale :</strong> <span id="totalXp">0</span></p>

    <div class="card week">
      <label><strong>Charge de la semaine :</strong></label>
      <div id="weekDisplay">Normale</div>
      <p>Objectif hebdo : <span id="weekGoal">150</span> XP <span id="malusText" class="malus"></span></p>
      <div class="progress-bar">
        <div class="progress-fill" id="progressWeek">0%</div>
      </div>
    </div>

    <div class="card month">
      <label><strong>Objectif du mois :</strong></label>
      <p><span id="monthXp">0</span> / <span id="monthGoal">400</span> XP</p>
      <div class="progress-bar">
        <div class="progress-fill" id="progressMonth">0%</div>
      </div>
    </div>

    <h3>Mondes</h3>
    <div class="worlds-grid" id="worldsList"></div>
    <button id="openAddWorldBtn">‚ûï Ajouter un monde</button>
  </div>

  <div id="addWorldModal" class="card hidden">
  <h3>Cr√©er un monde</h3>

  <label>Nom du monde</label>
  <input id="worldNameInput" placeholder="Ex : Sport" />

  <label>Ic√¥ne (emoji)</label>
  <input id="worldIconInput" placeholder="Ex : üèÉ" />

  <label>R√®gle XP</label>
  <div style="display:flex; gap:6px;">
    <input id="minutesBaseInput" type="number" placeholder="Minutes" />
    <span style="align-self:center;">=</span>
    <input id="xpBaseInput" type="number" placeholder="XP" />
  </div>

  <button id="createWorldBtn">Cr√©er le monde</button>
  <button id="cancelWorldBtn">Annuler</button>
</div>


  <!-- Page monde -->
  <div id="worldScreen" class="hidden">
    <button onclick="goHome()">‚Üê Retour</button>
    <h2 id="worldName"></h2>
    <div class="card">
      <p><strong>Temps cumul√© :</strong> <span id="worldTime">0</span> min</p>
      <p><strong>XP accumul√© :</strong> <span id="worldXp">0</span></p>
    </div>

    <div class="card">
      <label>Saisir le temps :</label>
      <input type="number" id="timeInput" class="time-input" placeholder="minutes ou heures">
      <select id="timeUnit" class="time-input">
        <option value="min">minutes</option>
        <option value="h">heures</option>
      </select>
      <button onclick="addWorldTime()">Ajouter temps</button>
    </div>

<div class="card">
  <h3>Qu√™tes du monde</h3>
  <div id="worldQuests"></div>

  <!-- Formulaire d'ajout de qu√™te -->
  <div id="addQuestForm" style="margin-top:10px; display:flex; gap:5px;">
    <input type="text" id="newQuestName" placeholder="Nom de la qu√™te" style="flex:2; padding:6px; border-radius:6px;">
    <input type="number" id="newQuestXp" placeholder="XP" style="flex:1; padding:6px; border-radius:6px;">
    <button id="addQuestBtn" style="padding:6px 10px; border-radius:6px;">Ajouter</button>
  </div>
</div>


  <div id="popup"></div>

</div>

<script src="js/worlds.js"></script>
<script src="js/xp.js"></script>
<script src="js/main.js"></script>
<script>
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('sw.js')
    .then(()=>console.log('SW enregistr√©'))
    .catch(err=>console.log('SW erreur', err));
}
</script>

</body>
</html>
